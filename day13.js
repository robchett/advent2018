require('./newStdLib');
const advent = require('./advent');

function move(grid, a) {	
	switch(grid[a.y][a.x]) {	
		case '/': { a.dir = {'^': '>', 'v': '<', '>': '^', '<': 'v'}[a.dir]; break;}
		case '\\': { a.dir = {'^': '<', 'v': '>', '>': 'v', '<': '^'}[a.dir]; break;}
		case '+': {
			a.dir = [
				{'^': '<', 'v': '>', '>': '^', '<': 'v'},
				{'^': '^', 'v': 'v', '>': '>', '<': '<'},
				{'^': '>', 'v': '<', '>': 'v', '<': '^'},
			][a.turn++ %3][a.dir]
			break;
		}

	}

	switch(a.dir) {
		case '^': {a.y--; break;}
		case '>': {a.x++; break;}
		case 'v': {a.y++; break;}
		case '<': {a.x--; break;}
	}
}

function readGrid(input) {
	var carts = [],
		grid = input.split("\n").map((a,i) => a.split("").map((a,j) => {
			if ('^>v<'.indexOf(a) != -1) {
				carts.push({x: j, y: i, dir: a, turn: 0});
				return {'^': '|', 'v': '|', '>': '-', '<': '-'}[a]
			}
			return a;
		}))
		return {carts, grid};
}

function part1(input) {
	var {carts, grid} = readGrid(input);

	while(true) {
		carts.sort((a,b) => {return (a.y - b.y) || (a.x-b.x)})
		var currPos = [];
		for (var c = 0; c < carts.length; c++) {
			move(grid, carts[c])

			for(var i = 0; i < carts.length; i++) {
				for(var j = 0; j < carts.length; j++) {
					if (i == j) continue;
					if (carts[i].x == carts[j].x && carts[j].y == carts[i].y) {
						return `${carts[i].x},${carts[i].y}`
					}
				}	
			}
		}
	}
}

function part2(input) {
	var {carts, grid} = readGrid(input);

    while(carts.length > 1) {
		carts.sort((a,b) => {return (a.y - b.y) || (a.x-b.x)})
		var currPos = [];
		for (var c = 0; c < carts.length; c++) {
			move(grid, carts[c])

			for(var i = 0; i < carts.length; i++) {
				for(var j = 0; j < carts.length; j++) {
					if (i == j) continue;
					if (carts[i].x == carts[j].x && carts[j].y == carts[i].y) {
						var sub = 0
					    if(c>=i)sub++;
			    	    if(c>=j)sub++;
			    	    c-=sub
						carts.splice(i, 1)
						carts.splice(i, 1)
					}
				}	
			}
		}
	}
	return `${carts[0].x},${carts[0].y}`;
}

advent.test(part1, `/->-\\       
|   |  /----\\
| /-+--+-\\  |
| | |  | v  |
\\-+-/  \\-+--/
  \\------/`, '7,3')
input = `                                  /------------------------------------------------------------------------------------------------------\\            
                                  |                                                  /------------------------------\\               /----+---\\        
                                  |                                 /----------------+-------------\\                |               | /--+---+----\\   
 /-----------------------------\\  |                         /-------+------------\\   |    /--------+----------------+---------------+-+--+---+----+-\\ 
 |                             |  |                         |       |            |   |  /-+--------+----------------+----\\          | |  |   |    | | 
 | /---------------------------+--+-------------------------+-------+------------+---+--+-+--------+----------\\     |    |          | |  |   |    | | 
 | |  /--------------------\\   |  |                     /---+------\\|            |   |  | |        |          |     |    |          | |  |   |    | | 
 | |  |                    |   |  |  /------------------+---+------++------------+---+--+-+--------+----------+-----+----+-------\\  | |  |   |    | | 
 | |  |                    |   |  |  |                  |   |      ||            |   |  | |        |          |     |    |       |  | |  |   |    | | 
 | |  | /------------------+---+--+--+------------------+---+------++-\\          |   |  | |        |          |     |    |       |  | |  |   |    | | 
 | |  | |             /----+---+--+--+------------------+---+------++-+----------+---+--+-+--------+----------+-----+-\\  |       |  | |  |   |    | | 
 | |  | |             |    |   |  |  |                  |   |      |\\-+----------+---+--+-+--------/          |     | |  |       |  | |  |   |    | | 
 | |  | |             | /--+---+--+--+---------------\\  |   |      |  |         /+---+--+-+-------------------+-----+-+--+-------+--+-+--+---+---\\| | 
 | |  | |             | |  |   |  |  |               |  |   |      |  |         ||   |  | |               /---+-----+-+--+-------+\\ | |  |   |   || | 
 | |  | |             | |/-+---+--+--+---------------+--+---+------+--+---------++---+--+-+-------------\\ |   |     | |  |       || | |  |   |   || | 
 | |  | |             | || |   |  |  |               |  |   |      |  |         ||   |  | |             | |   |     | |  |       || | |  |   |   || | 
 |/+--+-+-------------+-++-+---+--+--+---\\  /--------+--+---+------+--+---------++---+--+-+-------------+-+---+-----+-+-\\|       || | |  |   |   || | 
 |||  | | /-----------+-++-+---+--+--+---+--+--------+--+---+------+--+---------++---+-\\| |      /------+-+---+\\    | | ||       || | |  |   |   || | 
 |||  | | |     /-----+-++-+---+--+--+---+--+-\\   /--+--+---+------+--+------\\  ||   | || |      |      | |   ||    | | ||       || | |  |   |   || | 
 |||  | | |     |     | || |   |  |  |   |  |/+---+--+--+---+------+--+------+--++---+-++-+------+------+-+---++----+-+-++-------++\\| |  |   |   || | 
 |||  | | |     |     | || |   |  |/-+---+--+++-\\ |  |  |   |      |  |      |  ||   | || \\------+------+-+---++----+-+-++-------++++-+--+---+---++-/ 
 |||  | | |     |     | || |   |  || |   |  ||| | |  |  |   |    /-+--+------+--++\\  | ||        |      | |   ||   /+-+-++--\\    |||| |  |   |   ||   
 |||  | | |     |  /--+-++-+---+-\\|| |   |  ||| | |  |  |   |    | |  |      |  |||  | |^    /---+------+-+---++---++-+-++--+----++++-+--+--\\|   ||   
 |||  | | |  /--+--+--+-++-+---+-+++-+---+--+++-+-+--+--+---+----+-+--+------+--+++--+-++----+---+------+-+--\\||   || | ||  |    |||| |  |  ||   ||   
 |||  | | |  |  |  |  | || |   | ||| |   |  ||| | |  |  |   |    | |  |      |  |||  | ||    |   |      | |  |||   || | ||  |    |||| |  |  ||   ||   
 |||  | | | /+--+--+--+-++-+---+-+++-+---+--+++-+-+--+--+---+----+-+--+------+--+++--+-++----+---+------+-+--+++\\  || | ||  |    |||| |  |  ||   ||   
/+++--+-+-+-++--+--+--+-++-+---+-+++-+---+--+++-+-+--+--+-\\ |    | |  |      |  |||  | ||    |   |      | |  ||||  || | ||  |    |||| |  |  ||   ||   
||||  | | | ||  |  |  | || |   | ||| |   |  ||| | |  |  | | |    | |  |     /+--+++--+-++----+---+------+-+--++++--++-+-++--+----++++-+--+--++---++\\  
||||  | | | ||  | /+--+-++-+---+-+++\\\\---+--+++-+-+--+--+-+-+----+-+--+-----++--+++--+-++----+---+------+-+--++++--++-+-++--+----/||| |  |  ||   |||  
||||  | | | ||  | ||  | || |   | ||||    |  ||| | |  |  | | |    | |  |/----++--+++--+-++---\\|   \\------+-+--++/|  || |/++--+-----+++>+--+-\\||   |||  
|||| /+-+-+-++--+-++--+-++-+---+-++++\\   |  ||| | |  | /+-+-+----+-+--++----++--+++--+-++---++-----\\    | | /++-+--++-++++--+-----+++-+->+-+++\\  |||  
|||| || | | ||  | ||  | || |   | |||||   |  ||| | |  | || | |    | |  ||    ||  |||  | ||   ||     |    | | ||| |  || ||||  |  /--+++-+--+-++++--+++-\\
|||\\-++-+-+-++--+-++--+-++-+---+-+++++---+--+++-+-+--+-++-+-+----+-+--++----++--+++--+-++---++-----+----+-+-++/ |  || ||||  |  |  ||| |  | ||||  ||| |
|||  || | | ||  | ||  | || |   | |||||/--+--+++-+-+--+-++-+-+----+-+--++----++--+++--+-++---++--<--+----+-+-++--+--++-++++--+--+--+++-+-\\| ||||  ||| |
|||  || | | || /+-++--+-++-+---+-++++++--+--+++-+-+--+-++-+-+----+-+--++----++--+++--+-++---++-----+----+-+-++--+--++\\||||  |  |  ||| | || ||||  ||| |
|||  || | | || || ||  | || |   |/++++++--+--+++-+-+--+-++-+-+----+-+--++----++--+++--+-++---++-----+----+\\| ||  |  |||||||  |  |  ||| | || ||||  ||| |
|||  |\\-+-+-++-++-++--+-++-/   ||||||||  |  ||| | |  | |\\-+-+----+-/  ||    ||  |||  | ||   ||     |    ||| ||  |  |||||||  |  |  ||| \\-++-++++--+/| |
|||  |  | | || ||/++--+-++-----++++++++--+--+++-+-+--+-+--+-+----+----++----++--+++--+-++---++-\\   |    ||| ||  |  |||||||  |  |  |||   || ||||  | | |
|||  |  | | || |||||  | ||   /-++++++++--+--+++-+-+--+-+--+-+--\\ \\----++----++--++/  | ||   || |   |    ||\\-++--+--+++++++--+--+--/||   || ||||  | | |
|||/-+--+-+-++-+++++--+-++---+-++++++++--+--+++-+-+--+-+-\\| |  |      ||    ||  ||   | |\\---++-+---+----++--++--+--++++++/  |  |   ||   || ||||  | | |
|||| |  | | || |||||  | ||   | |||||||| /+--+++-+-+--+-+-++-+--+------++----++--++---+-+----++-+---+----++--++\\ |  ||||||   |  |   ||   || ||||  | | |
||||/+--+-+-++-+++++--+-++---+-++++++++-++--+++-+-+--+-+-++-+--+------++----++<-++---+-+----++-+\\  |    ||  ||| |  ||||||   |  |   ||   || ||||  | | |
||||||  | | || |||||  | ||   | |||||||| ||  \\++-+-+--+-+-++-+--+------++----++--++---+-+----++-++--+----++--+++-+--+++++/   |  |   ||   || ||||  | | |
||||||  |/+-++-+++++--+-++---+-++++++++-++---++-+-+--+-+-++-+--+------++----++--++-\\ | |    || ||  |    ||  ||| |  |||||    |  |   ||   || ||||  | | |
||||||  ||| || |||||  | ||   | |||||||| ||   || | \\--+-+-++-+--+------++----+/  || | | |    || ||  |    ||  ||| |  |||||    |  |   ||   || ||||  | | |
||||||  ||| || |||||  | || /-+-++++++++-++---++-+----+-+\\|| \\--+------++----+---+/ | | |    || ||  |    ||  ||| |  ||||\\----+--+---++---++-/|||  | | |
||||||  ||| || ||||\\--+-++-+-+-++/||||| ||   || |    | ||||    | /----++----+--\\|  | | |/---++-++--+->--++--+++-+--++++-----+\\ |   ||   ||  |||  | | |
||||||  ||| || ||||   | || | | || ||||| ||   || |    | ||||    | |    ||    |  ||  | | ||   || ||  |    ||  ||| |  ||||   /-++-+---++---++--+++--+\\| |
||||||  ||| || ||||   | || | | || ||||| ||   || |    | ||||    | |    ||    |  ||  | | ||   || ||  |  /-++--+++-+--++++---+-++-+---++---++--+++--+++\\|
||||||  ||| || ||||   | || | | || ||||| ||   || |    | ||||    | |    ||    |  ||  | | ||   || ||  |  | ||  \\++-+--++++---+-++-+---++---++--++/  |||||
||||||  ||| || ||||   | || | | || ||||| ||   || |    | ||||    | |    ||    |  ||  | | ||   |\\-++--+--+-++---++-+--++++---+-++>+---++---++--/|   |||||
||||||  ||| || ||||   | \\+-+-+-++-+++++-++---++-+----/ ||||    | |    ||    |  ||  | | ||   |  ||  |  | ||   || |  ||||   | || |   ||   ||   |   |||||
||||\\+--+++-++-++++---+--+-+-+-++-+++++-++---++-+------++++----+-+----++----+--++--+-+-++---+--+/  |  | ||   || |  ||||   | || |   ||   ||   |   |||||
|||| |  ||| || ||||   |  | | | || ||||| ||   || | /----++++----+-+----++----+--++--+-+-++---+--+---+--+-++---++-+--++++---+-++-+---++\\  ||   |   |||||
|||| |  ||| || ||||   |  | | | || ||||| ||   || | |    ||||    | |    ||   /+--++--+-+-++---+--+---+--+-++---++-+-\\|||| /-+-++-+---+++--++--\\|   |||||
|||| |  ||| || ||||   |  | | | || ||||| ||   ||/+-+----++++----+-+--\\ ||   ||  ||  | | ||   | /+---+--+-++---++-+-+++++-+-+-++-+---+++--++--++-\\ |||||
|||^ |  ||| || ||||   |  | | | || ||||| ||/--++++-+----++++----+-+--+-++---++--++--+-+-++---+-++---+--+-++---++-+-+++++-+-+-++-+---+++--++--++\\| |||||
|||\\-+--+++-++-++++---+--+-+-+-++-+++++-+++--++++-+----++/|    | |  | ||   ||  ||  | | ||   | ||   |  | ||   || | ||||| | | || |   |||  ||  |||| |||||
|||  |  ||| || ||||   |  |/+-+-++-+++++-+++--++++-+----++-+\\   | |  | ||   ||  ||  | | ||   | ||   |  | ||   || | ||||| | | || |   |||  ||  |||| |||||
|||  |  ^|| || ||||   |  ||| | || ||||| |||  |||| |    || ||   | |  | ||   |\\--++--+-+-++---+-++---+--+-++---++-+-+++++-+-+-++-+---+++--++--++++-++/||
|||  |  ||| || ||||   |  ||| | || ||||| |||  |||| |  /-++-++---+-+--+\\||   |   ||  | | ||   | ||   |  | ||   || | ||||| | | || |   |||  ||  |||| || ||
|||  |  ||| || ||||   |  ||| | || ||||| |||  |||| |  | || ||   | |  ||||   |   ||  | | ||   | ||   |  | ||   || | ||||| | | || |   |||  ||  |||| || ||
|||  |  ||| || ||||   |  ||| | || \\++++-+++--++++-+--+-++-++---+-+--++++---+---++--+-+-++---+-++---+--+-++---++-+-+++++-+-+-++-+---+++--+/  |||| || ||
|||  |  ||| || ||||   |  ||| | ||  |||| |||  |||| |  | || ||/--+-+--++++---+---++--+-+-++---+-++---+--+-++---++-+-+++++-+-+-++-+\\  |||  |   |||| || ||
|||  |  ||| || ||||   |  ||\\-+-++--++++-+++--++++-+--+-+/ |||  | |  ||||   |   ||  | | ||   | ||   |  | ||   || | ||||| | \\-++-++--+++--+---++++-+/ ||
|||  |  ||| || ||||   |  ||  | ||  |||| |||  |||| |  | |  |||  | |  ||||   |   ||  | | ||   | ||   |  | ||   || | ||||| |   || ||  |||  |   |||| |  ||
|||  |  ||| || ||||   | /++--+-++--++++-+++--++++-+--+-+--+++--+-+--++++---+\\  ||  | | ||   | ||   |  | ||   || | ||||| |   || ||  |||  |   |||| |  ||
|||  |  ||| || ||||   | |||  | ||  |||| |||  |||| |  | |  |||  | |  ||||   ||  ||  | | ||   | ||   |  | ||   || | ||||| |   || ||  |||  |   |||| |  ||
|||  |  ||| || ||||   | |||  | ||  |||| |||  |||| |  | |  |||  | |  ||||   ||  ||  | |/++---+-++---+--+-++---++-+-+++++-+---++-++--+++--+\\  |||| |  ||
|||  |  ||| || ||||   | |||  | ||  |||| |||/-++++-+--+-+--+++--+-+--++++---++--++--+-++++---+-++---+--+-++---++-+-+++++-+---++-++--+++--++\\ |||| |  ||
|||  |  ||| || ||||   | |||/-+-++--++++-++++-++++-+--+-+--+++--+-+--++++\\  ||  ||  | ||||   | ||   |  | ||   || | ||||| |   || ||  |||  ||| |||| |  ||
|||  |  ||| || |\\++---+-++++-+-++--++++-++++-+/|| |  | |  |||  | |  |||||  ||  ||  | ||||   | ||   |  | ||   || | ||||| |   || ||  |||  ||| |||| |  ||
|||  |  \\++-++-+-++---+-++++-+-++--++++-++++-+-++-+--+-+--+++--+-+--++/||  ||  ||  | ||||   | ||   |  | ||   || | ||||| |   || ||  |||  ||| |||| |  ||
|||  |   || || | ||   | |||| | ||  |||| |||| | || |  | |  |||  | |  || ||  ||  ||  | ||||   | ||   |  | ||   || | ||||| \\---++-++--+++--+++-/||| |  ||
|||  |   || || | ||   | ||||/+-++--++++-++++-+-++-+--+-+--+++--+-+--++-++--++--++--+-++++-\\ | ||   |  | ||   || | |||||     || ||  |||  |||  ||| |  ||
|||  |   || || | ||   | |||||| ||  |||| |||| | ||/+--+-+--+++--+-+--++-++--++--++--+-++++-+-+-++---+--+-++---++-+-+++++-----++-++\\ |||  |||  ||| |  ||
|||  |   || || | ||   | |||||| ||  |||| |||| | ||||  |/+--+++--+-+--++-++--++-\\||  |/++++-+-+-++---+--+-++-\\ || | |||||     || ||| |||  |||  ||| |  ||
|||  |   |\\-++-+-++---+-++++++-++--++++-++++-+-++++--+++--+++--+-+--++-++--++-+++--++++/| | | ||   |  | || | || | |||||     || ||| |||  |||  ||| |  ||
|||  |   |  || | \\+---+-++++++-++--++++-++++-+-++++--+++--+++--+-+--++-++--++-+++--++++-+-+-+-+/   |  | || | || | |||||     || ||| |||  |||  ||| |  ||
|||  |   | /++-+--+---+-++++++-++--++++-++++-+-++++--+++-\\|||  | |  || ||  || |||  |||| | | | |    |  | || | || | |||||     || ||| |||  |||  ||| |  ||
|||  |   | ||| |  |  /+-++++++-++--++++-++++-+-++++\\ ||| ||||  | |  || ||  || |||  |||| | | | |    |  | || | || | |||||     || ||| v||  |||  ||| |  ||
|||  |   | ||| |  |  || |||||| ||  |||| |||| | ||||| ||| ||||  | |  || ||  || |||  |||| | | | |   /+--+-++-+\\|| | |||||     || ||| |||  |||  ||| |  ||
|||  |   | ||| |  |  || |||||| ||  |||^ |||| | ||||| ||| ||||  | |  || ||  \\+-+++--++++-+-+-+-+---++--+-++-++++-+-/||||     || ||| |||  |||  ||| |  ||
|||  |   | |\\+-+--+--++-++++++-++--++++-++++-+-+++++-+++-++++--+-+--++-++---+-+++--++++-+-+-+-+>--++--+-++-++++-/  ||||     || ||| |||  |||  ||| |  ||
|||  |   | | | | /+--++-++++++-++--++++-++++-+-+++++-+++-++++--+-+--++-++---+-+++\\ |||| | | | |   ||  | || ||||    ||||/----++-+++-+++--+++-\\||| |  ||
|||  |   | | | | |\\--++-++++++-++--+/|| |||| | ||||| ||| ||||  | |/-++-++---+-++++-++++-+-+-+-+---++--+-++-++++----+++++----++-+++-+++--+++\\|||| |  ||
|||  |   | | | | |   || |||||| ||  | || |||| | ||||| ||| ||||  | || || ||   | |||| ||||/+-+-+-+---++--+-++-++++----+++++----++\\||| |||  |||||||| |  ||
|||  |   | | | | |   || |||||| ||  | || |||| | ||\\++-+++-++++--+-++-++-++---+-++++-++++++-+-+-+---++--+-++-++++----+++++----+++++/ |||  |||||||| |  ||
|||  |   v | | | |  /++-++++++-++--+-++-++++-+-++-++-+++-++++--+-++-++-++\\  | |||| ||\\+++-+-+-+---++--+-++-++++----+/|||    |||||  |||  |||||||| |  ||
|||  |   | | | | |  ||| |||||| || /+-++-++++-+-++-++-+++-++++--+-++-++-+++--+-++++-++-+++-+-+-+---++--+-++-++++\\   | |||    |||||  |||  |||||||| |  ||
|||  |   | | | | |  ||| |||||| || ||/++-++++-+-++-++-+++-++++--+-++-++-+++--+-++++-++-+++-+\\| |   ||  | || |||||   | |||    |||||  |||  |||||||| |  ||
|||  |   | | | | |  ||| |||||| || ||||| |||| | || || |\\+-++++--+-++-++-+++--+-/||| || ||| ||| |   ||  | || |||||   | |||    |||||  |||  |||||||| |  ||
|||  |   | | | | |  ||| |||||| || ||||| |||| | || || | | |||\\--+-++-++-+++--+--+++-++-+++-+++-+---++--+-++-+++++---+-+++----++++/  |||  |||||||| |  ||
|||  |   | | | | |  ||| |||||| || ||||| |||| | || || | | |||   | || || |||  |  ||| || ||| ||| |   ||  | || |||||   | |||    ||||   |||  |||||||| |  ||
|||  |   | | | | |  ||| |||||| || ||||| |||| | || || | | |||   | |\\-++-+++--+--+++-++-+++-+++-+---++--+-++-+++++---+-+++----++++---+++--+++/|||| |  ||
|||  |   | | | | |  ||| |||\\++-++-+++++-++++-+-++-++-+-+-+++---+-+--++-+/|  |  ||| || ||| ||| |   ||  | || |||||   \\-+++----/|||   |||  ||| |||| |  ||
|||  |   | | | \\-+--+++-+++-++-++-+++++-++++-+-++-++-+-+-+++---+-+--++-+-+--+--+++-++-+++-+++-+---++--+-++-+++++-----/||     |||   |||  ||| |||| |  ||
|||  |   | | |   |  ||| ||| || || ||||| |||| v || || | | |||   | |  || | |  |  ||| || |||/+++-+---++--+-++-+++++------++--\\  |||   |||  ||| |||| |  ||
|||  |   | | |   |  ||| ||| || || ||||| |||| | || || | | |||   | |  || | |  |  ||| || \\++++++-+---++--+-++-+++++------++--+--+++---+++--+/| |||| |  ||
|||  |   \\-+-+---+--+++-+++-++-++-+++++-++++-+-++-++-+-+-+++---+-+--++-+-+--+--+++-/|  |||||| |   ||  | || |||||      ||  |  ||\\---+++--+-+-++++-+--+/
|||  |     | |   |  ||| ||| || || ||||| |||| | \\+-++-+-+-+++---+-+--/| | |  |  |||  |  |||||| |   ||  | || |||||      ||  |  ||    |||  | | |||| |  | 
|||  |     | |   |  ||| ||| || || ||||| |||| |  | || | | |||   | |   | | |  |  |||  |  |||||| |/--++--+-++-+++++------++--+\\ ||    |\\+--+-+-+/|| |  | 
|||  |     | |   \\--+++-+++-++-++-+++++-++++-+--+-++-+-+-+++---+-+---+-+-+--+>-++/  |  |||||| \\+--++--+-++-+++++------++--++-++----+-+--+-+-+-+/ |  | 
|||  |     | |      ||| ||| || || ||||| |||| |  | || | | |||   | |   | | |  |  ||   |  ||||||  |  ||  | || |||||      ||  || ||    | |  | | | |  |  | 
|||  |     | |      ||| ||| |\\-++-+++++-++++-+-<+-++-+-+-+++---/ |   | | |  |  ||   |  ||||||  |  ||  | || |||||      ||  || ||    | | /+-+-+-+--+\\ | 
||\\--+-----+-+------+++-+++-+--++-+++++-+/|| |  | || | | |||     |   | | |  |  ||   |  ||||||  |  ||  | ||/+++++------++--++\\||    | | || | | |  || | 
||   |     | |      ||| ||| |  || ||||| | || |  | || | | |||     |  /+-+-+--+--++---+--++++++-\\|  ||  | ||||||||      |\\--+++++----+-+-++-+-/ |  || | 
||   \\-----+-+------+++-+++-+--++-+++/| | || |  | || | | |||     |  || \\-+--+--++---+--+++++/ ||  ||  | ||||||||    /-+---+++++----+-+-++-+---+--++-+\\
|\\---------+-+------+++-+++-+--/| |||/+-+-++-+--+-++-+-+-+++-----+--++---+--+--++---+\\ |||||  ||  ||  | ||||||||    | |   |||||    | | || |   |  || ||
|          | |      ||\\-+++-+---+-+++++-+-++-+--+-++-+-+-+++-----+--++---+--+--++---++-+++++--++--++--+-++++++++----+-/   |||||    | | || |   |  || ||
|          | |      ||  ||| |   | ||||| \\-++-+--+-++-+-+-+++-----+--++---+--+--++---++-+++++--++--++--+-++++++/|    |     |||||    | | || |   |  || ||
\\----------+-+------++--+++-+---+-+++++---++-+--+-++-+-+-+/|     |  ||   |  |  ||   || |||||  ||  ||  | |||||| |    |     |||||    | | || |   |  || ||
           | |      ||  ||| |   | |||||   || |  | || | | | |     |  ||   |  |  |\\---++-+++++--++--++--+-++++++-+----+-----+++++----+-+-++-+---+--/| ||
        /--+-+------++--+++-+\\  | |||||/--++-+--+-++-+-+-+-+-----+--++\\  |  |  |    || ||\\++--++--++--+-++++++-+----+-----/||||    | | || |   |   | ||
/-------+--+-+------++--+++-++--+-++++++--++-+--+-++-+-+-+-+-----+--+++--+--+--+----++-++-++--++\\ ||  | |||||| |    |      ||||    | | || |   |   | ||
|       |  | |      ||  |\\+-++--+-++++++--++-+--+-++-+-+-+-+-----+--+++--+--+--+----++-++-++--+++-++--+-/||||| |    |      ||||    | | || |   |   | ||
|       |  | |      ||  | | ||  | |\\++++--++-+--/ || \\-+-+-+-----+--+/|  |  |  |    || || ||  ||| ||  |  ||||| |    |      ||||    | | || |   |   | ||
|       |  | |      ||  | |/++--+-+-++++--++-+----++---+-+-+-----+--+-+--+--+--+----++-++-++-\\||| ||  |  ||||| |    |   /--++++---\\| | || |   |   | ||
|       |  \\-+------++--+-++++--+-+-++++--++-+----++---+-/ |    /+--+-+--+--+--+----++-++-++-++++-++--+--+++++-+----+--\\|  ||||   || | || |   |   | ||
|       |    |      ||  | ||||  | | ||||  |\\-+----++---+---+----++--+-+--+--+--+----++-++-++-++++-++--+--+++++-+----+--++--++++---++-+-++-/   |   | ||
|       |/---+------++--+-++++--+-+-++++--+--+----++--\\|   |    ||  | |  |  | /+----++-++-++-++++-++--+--+++++-+----+--++--++++---++-+-++-----+---+\\||
|       ||  /+------++--+-++++--+-+-++++--+--+----++--++---+----++--+-+--+--+-++----++-++-++-++++-++--+--+++++-+--\\ |  ||  ||||   || | ||     |   ||||
|       ||  ||      ||  | ||||  | | ||||  |  |    ||  ||   |    ||  | |  |  | ||    || || || |||| ||  \\--+++++-+--+-+--++--++++---++-+-++-----+---++/|
|       ||  ||      ||  | ||||  | | ||||  |  |    \\+--++---+----++--+-+--+--+-++----++-++-++>++++-++-----+++++-+--+-+--++--++++---++-/ ||     |   || |
|       ||  ||      ||  | ||||  | | ||||  |  |     |  ||   |    ||  | |  |  | ||    \\+-++-++-++++-++-----++/|| |  | |  ||  ||||   ||   ||     |   || |
|       ||  ||      ||  | ||||  | | ||||  |  \\-----+--++---+----++--+-+--+--+-++-----+-++-++-++++-++-----++-++-+--+-+--++--++++---+/   ||     |   || |
|       ||  |\\------++--+-++++--+-+-++++--+--------+--++---+----++--+-+--+--+-++-----+-++-++-++++-++-----++-+/ |  | |  ||  ||||   |    ||     |   || |
|       ||  |       ||  | ||||  \\-+-++++--+--------+--++---+----++--+-+--+--+-++-----+-++-++-++++-++-----/| |  |  | |  ||  ||||   |    ||     |   || |
|       ||  |       ||  | ||||    | ||||  |        |  |\\---+----++--+-+--+--+-++-----+-++-++-++++-+/      | |  |  | |  ||  ||||   |    ||     |   || |
|   /---++--+\\      ||  | ||||    | ||||  |        |  |    |    ||  \\-+--+--+-++-----+-++-++-+/|| |       | |  |  | |  ||  ||||   |    ||     |   || |
|   |   ||  ||      ||  | ||||    | ||\\+--+--------+--+----+----++----+--+--+-++-----+-++-++-+-++-+-------+-+--+--+-+--++--++++---+----+/     |   || |
|   |   ||  ||      ||  | ||||    | || \\--+--------+--+----+----++----/  |  | ||     | || || | || |       | |  |  | |  |\\--++++---/    |      |   || |
|   |   ||  ||      ||  | ||||    | ||    |        |  |    |    \\+-------+--+-++-----+-++-++-+-++-+-------+-+--+--+-+--/   ||||        |      |   || |
|   |   ||  ||      |\\--+-++++----+-++----+--------/  |    |     |       |  | ||     | || || | || |       | |  |  | |      ||||        |      |   || |
|   |   ||  ||      |   | ||||    | ||    \\-----------+----+-----+-------+--+-++-----+-++-++-+-++-+-------+-+--+--+-+------++++--------+------/   || |
\\---+---++--++------+---+-++++----+-++----------------+----+-----+-------+--+-++-----+-++-++-+-+//+-------+-+--+\\ | |      ||||        |          || |
    |   |\\--++------+---+-++++----+-++----------------/    |     |       |  | ||     | || || | | ||       | |  || | |      ||||        |          || |
    |   |   \\+------+---+-++++----+-++---------------------+-----+-------+--+-++-----+-++-++-+-+-++-------+-+--++-/ |      ||||        |          || |
    |   |    |      |   \\-++++----+-++---------------------+-----+-------+--/ \\+-----+-++-++-+-+-++-------+-+--++---+------++++--------+----------+/ |
    |   |    |      |     ||||    | ||                     |     |       |     |     | \\+-++-+-+-++-------+-+--++---+------+++/        |          |  |
    |   |    |      |     ||||    | \\+---------------------+-----+-------+-----+-----+--+-+/ | | ||       | |  ||   |      |||         |          |  |
    |   |    |      |     ||||    |  |                     |     |       |     |     |  | |  | | ||       | |  ||   |      |||         |          |  |
    |   |    |      |     ||||    \\--+---------------------+-----+-------+-----+-----+--+-+--+-+-++-------+-+--/|   |      |||         |          |  |
    |   |    |      |     \\+++-------+---------------------/     |       |     |     |  | |  | | ||       | |   |   \\------+++---------+----------+--/
    \\---+----/      |      \\++-------+---------------------------+-------+-----+-----+--+-+--/ | \\+-------+-+---/          |||         |          |   
        |           \\-------++-------+---------------------------+-------/     |     |  | |    \\--+-------+-+--------------/||         |          |   
        |                   ||       |                           \\-------------/     |  | |       |       \\-+---------------/|         |          |   
        |                   \\+-------+-----------------------------------------------+--+-/       |         |                |         \\----------/   
        \\--------------------/       \\-----------------------------------------------/  \\---------+---------+----------------/                        
                                                                                                  \\---------/                                         
`
advent.run(part1, input);

advent.test(part2, `/>-<\\
|   |  
| /<+-\\
| | | v
\\>+</ |
  |   ^
  \\<->/`, '6,4')
advent.run(part2, input)